# スコアリングモデル仕様

## 1. 軸（7軸）

### 主要5軸（価値観タイプ判定に使用）
| ID | ラベル | 概要 |
|----|--------|------|
| COST | 予算・コスパ | 予算上限・コスパ重視 |
| PERF | 性能・快適 | 性能・快適性・構造重視 |
| DESIGN | デザイン | 意匠・世界観重視 |
| LIFE | 家事ラク | 家事ラク・日常ストレス低減 |
| FLEX | 将来可変 | 将来可変・汎用性 |

### 補助2軸（依頼先タイプ・進め方提案に使用）
| ID | ラベル | 概要 |
|----|--------|------|
| INVOLVE | こだわり関与度 | 自分で比較して決めたい↔絞って提案してほしい |
| ASSURE | 透明性・第三者確認 | 内訳/契約/変更履歴/検査 |

## 2. 回答形式（価値観26問）

5段階リッカート:
- 5: とてもそう思う → rawScore = +2
- 4: そう思う → rawScore = +1
- 3: どちらとも言えない → rawScore = 0
- 2: あまりそう思わない → rawScore = -1
- 1: まったくそう思わない → rawScore = -2

`reverse=true` の質問は rawScore を -1倍して加算。

## 3. 軸スコア（0-100正規化）

```
sum = 軸に属する質問の符号反転後rawScoreの合計
n = その軸の質問数
axisScore = ((sum + 2n) / (4n)) × 100
```

小数は四捨五入。

## 4. 夫婦モード

- scoreAvg = (A + B) / 2
- gap = abs(A - B)

ギャップ判定:
| gap | レベル | 対応 |
|-----|--------|------|
| < 12 | ok | 問題なし |
| 12-19 | check | 要確認（話し合い推奨） |
| >= 20 | risk | 揉めやすい論点（強調表示） |

## 5. 価値観タイプ判定（10タイプ）

主要5軸の scoreAvg で判定:

1. top1Score < 65 → V10（バランス堅実）
2. top1Score >= 70 && top2Score >= 65:
   - {COST, LIFE} → V6（実用コスパ）
   - {COST, PERF} → V7（性能コスパ）
   - {PERF, DESIGN} → V8（意匠×性能ハイスペ）
   - {PERF, LIFE} → V9（暮らし性能）
   - それ以外 → singleAxisType(top1)
3. それ以外 → singleAxisType(top1)

singleAxisType:
- COST → V1, PERF → V2, DESIGN → V3, LIFE → V4, FLEX → V5

## 6. 規模タイプ（S/M/L）

### 基本坪数レンジ
| 人数 | low | high |
|------|-----|------|
| 2 | 26 | 32 |
| 3 | 30 | 36 |
| 4 | 34 | 40 |
| 5 | 38 | 46 |
| 6+ | 42 | 52 |

### 加算要素
| 条件 | low加算 | high加算 |
|------|---------|----------|
| 書斎（個室） | +2 | +4 |
| 趣味多い＋専用室 | +3 | +6 |
| 趣味多い（専用室なし） | +1 | +2 |
| 来客週1＋客間必要 | +2 | +4 |
| 収納多め | +1 | +2 |

### 分類
- S（コンパクト）: tsuboMid < 31
- M（標準）: 31 <= tsuboMid < 39
- L（ゆったり）: tsuboMid >= 39

## 7. 30タイプ

typeCode = "{size}-{valueType}" (例: "M-V4")
表示名 = "{sizeLabel}・{valueTypeName}"

## 8. 依頼先タイプ推薦

8種のBuilderTypeをスコアリングし上位3つを提示。加点ルールは以下:

| 条件 | 加点先 |
|------|--------|
| COST >= 70 | B1+3, B2+2 |
| PERF >= 70 | B5+3 |
| DESIGN >= 70 | B4+3 |
| LIFE >= 70 | B3+2, B6+1 |
| FLEX >= 70 | B3+1, B6+2, B7+1 |
| INVOLVE >= 70 | B3+2, B4+2, B6+2 |
| INVOLVE <= 40 | B1+2, B2+2, B7+2 |
| ASSURE >= 70 | B8+3, B7+2 |
| ASSURE <= 40 | B6+1 |

## 9. 予算概算

```
r = (rate/100) / 12
n = years × 12
loanMax = payment × (1 - (1+r)^(-n)) / r
totalBudgetApprox = loanMax + downPayment
```
